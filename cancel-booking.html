<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batalkan Pesanan - Sports Field Rental</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/space-theme.css">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg">
                    <div class="card-header bg-danger text-white">
                        <h3 class="mb-0"><i class="fas fa-times-circle me-2"></i>Batalkan Pesanan</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i> Peringatan: Pembatalan pesanan hanya dapat dilakukan sebelum pembayaran dikonfirmasi.
                        </div>
                        
                        <form id="cancelForm">
                            <div class="mb-3">
                                <label for="cancelBookingId" class="form-label">ID Booking</label>
                                <input type="text" class="form-control" id="cancelBookingId" placeholder="Masukkan ID booking yang ingin dibatalkan" required>
                            </div>
                            
                            <div class="mb-3">
                                <label for="cancelReason" class="form-label">Alasan Pembatalan</label>
                                <textarea class="form-control" id="cancelReason" rows="3" placeholder="Jelaskan alasan Anda membatalkan pesanan"></textarea>
                            </div>
                            
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="confirmCancel" required>
                                <label class="form-check-label" for="confirmCancel">Saya yakin ingin membatalkan pesanan ini</label>
                            </div>
                            
                            <button type="submit" class="btn btn-danger w-100 py-2">
                                <i class="fas fa-trash-alt me-2"></i> Batalkan Pesanan
                            </button>
                        </form>
                        
                        <!-- Daftar Pesanan Aktif -->
                        <div class="active-bookings mt-5">
                            <h5><i class="fas fa-list me-2"></i> Pesanan Saya</h5>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID Booking</th>
                                            <th>Jadwal</th>
                                            <th>Status</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>BKG001</td>
                                            <td>18 Dec 2025, 18:00-19:00</td>
                                            <td><span class="badge bg-warning">Menunggu Pembayaran</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-danger cancel-btn" data-booking-id="BKG001">
                                                    <i class="fas fa-times"></i> Batalkan
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>BKG002</td>
                                            <td>20 Dec 2025, 19:00-20:00</td>
                                            <td><span class="badge bg-success">Terbayar</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-secondary" disabled>Dibatalkan</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>BKG003</td>
                                            <td>22 Dec 2025, 17:00-18:00</td>
                                            <td><span class="badge bg-warning">Menunggu Pembayaran</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-danger cancel-btn" data-booking-id="BKG003">
                                                    <i class="fas fa-times"></i> Batalkan
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <a href="booking-history.html" class="btn btn-secondary"><i class="fas fa-arrow-left me-2"></i> Lihat Riwayat Booking</a>
                    <a href="index.html" class="btn btn-primary"><i class="fas fa-home me-2"></i> Kembali ke Beranda</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('cancelForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const bookingId = document.getElementById('cancelBookingId').value;
            const reason = document.getElementById('cancelReason').value;
            
            // Konfirmasi pembatalan
            if (confirm(`Anda yakin ingin membatalkan booking ${bookingId}?`)) {
                alert(`Pesanan ${bookingId} telah dibatalkan.\nAlasan: ${reason || 'Tidak disebutkan'}`);
                
                // Reset form
                document.getElementById('cancelForm').reset();
            }
        });
        
        // Event listener untuk tombol batalkan di tabel
        document.querySelectorAll('.cancel-btn').forEach(button => {
            button.addEventListener('click', function() {
                const bookingId = this.getAttribute('data-booking-id');
                
                if (confirm(`Anda yakin ingin membatalkan booking ${bookingId}?`)) {
                    alert(`Pesanan ${bookingId} telah dibatalkan.`);
                    
                    // Update status di tabel
                    this.closest('tr').querySelector('span.badge').className = 'badge bg-secondary';
                    this.closest('tr').querySelector('span.badge').textContent = 'Dibatalkan';
                    this.className = 'btn btn-sm btn-secondary';
                    this.disabled = true;
                    this.textContent = 'Dibatalkan';
                }
            });
        });
    </script>
</body>
</html>